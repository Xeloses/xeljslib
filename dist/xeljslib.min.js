/**
 * @name         XelJSlib
 * @description  Xeloses' JS library.
 * @version      0.0.2
 * @author       Xeloses (https://github.com/Xeloses)
 * @homepage     https://github.com/Xeloses/xeljslib
 * @license      GPL-3.0
 */(()=>{"use strict";var e={918:(e,t,_)=>{_.d(t,{Z:()=>s});const s={toBrowser:function(e){for(const t in e){const _=t.replace(/[^\w]+/g,"_").replace(/_+/g,"_");"undefined"!=typeof unsafeWindow&&(unsafeWindow[_]=e[t]),"undefined"!=typeof window&&(window[_]=e[t])}}}},416:(e,t,_)=>{_.d(t,{Z:()=>o});var s=_(918);class r{constructor(e={},t={}){const _={logHeaderColor:"c5c",logTextColor:"ddd",noConsole:!1},s=t?Object.assign(_,t):_;this.__name__=e.name||"Script",this.__version__=e.version||"0.0.1",this.__author__=e.author||null,this.__description__=e.description||null,this.__url__=e.homepage||null,this.__license__=e.license||"MIT",this.__namespace__=e.namespace||(this.__author__?`${this.__author__.replace(/[^.\-\w]+/g,"")}.`:"")+this.__name__.replace(/[^.\-\w]+/g,""),this.__unique_id__=this.__namespace__.replace(/[.\-\s]+/g,"_").replace(/[^\w]+/g,"").toLowerCase(),this.__config__={colors:{header:`color:#${s.logHeaderColor};font-weight:bold;`,text:`color:#${s.logTextColor};font-weight:normal;`},no_console:s.noConsole}}get name(){return this.__name__}get appName(){return this.__name__}get version(){return this.__version__}get ver(){return this.__version__}get author(){return this.__author__}get description(){return this.__description__}get homepage(){return this.__url__}get url(){return this.__url__}get namespace(){return this.__namespace__}get ns(){return this.__namespace__}get prefix(){return this.__unique_id__}get unique(){return this.__unique_id__}log(e){this.__config__.no_console||console.log(`%c[${this.name}]%c ${e}`,this.__config__.colors.header,this.__config__.colors.text)}dump(e,t=null){this.__config__.no_console||(t&&this.log(t),console.log(e))}logInfo(e){this.__config__.no_console||console.info(`%c[${this.name}]%c ${e}`,this.__config__.colors.header,`${this.__config__.colors.text}font-style:italic;`)}logWarn(e){this.__config__.no_console||console.warn(`%c[${this.name}]%c ${e}`,this.__config__.colors.header,this.__config__.colors.text)}logError(e){this.__config__.no_console||console.error(`%c[${this.name}]%c ${e}`,this.__config__.colors.header,this.__config__.colors.text)}logInit(){this.logInfo(`App loaded (version: ${this.version})`)}}s.Z.toBrowser({XelApp:r});const o=r},778:(e,t,_)=>{_.d(t,{Z:()=>c});var s=_(416);class r extends Error{constructor(e){super(e),this.name=this.constructor.name}}const o=r;const i=class{constructor(e=1,t={},_=null){const s={isUserscript:!1,useUserscriptStorage:!0},r=t?Object.assign(s,t):s;if(r.isUserscript&&r.useUserscriptStorage){if(!this.__isUserscriptStorageAvailable())throw new o("Userscript storage is disabled or unavailable.")}else if(!this.__isLocalStorageAvailable())throw new o("Storage is unavailable.");this.__version__=this.__n(e),this.__cache__=new Map,this.__version__>Number.parseFloat(this.__storageAPI__.get("_v",0))&&(this.__storageAPI__.set("_v",this.__version__),_&&_(this))}__n(e){if("number"==typeof e)return e;if(null===e||Number.isNaN(e))return 0;const t=/(\d+)\.(\d+)(\.\d+)?(\.\d+)?/.exec(e);return t?1e6*Number.parseFloat(t[1])+(void 0!==t[2]?1e3*Number.parseInt(t[2]):0)+(void 0!==t[3]?Number.parseInt(t[3].slice(1)):0)+(void 0!==t[4]?Number.parseFloat(t[4]):0):0}__emit(e,t){if(this.__e__[e]&&this.__e__[e].length)return this.__e__[e].forEach((e=>e(t))),this}__isUserscriptStorageAvailable(){return this.__storageAPI__.get="undefined"!=typeof GM_getValue?GM_getValue:GM&&void 0!==GM.getValue?GM.getValue:null,this.__storageAPI__.set="undefined"!=typeof GM_setValue?GM_setValue:GM&&void 0!==GM.setValue?GM.setValue:null,this.__storageAPI__.remove="undefined"!=typeof GM_deleteValue?GM_deleteValue:GM&&void 0!==GM.deleteValue?GM.deleteValue:null,this.__storageAPI__.clear=()=>{const e="undefined"!=typeof GM_listValues?GM_listValues():GM&&void 0!==GM.listValues?GM.listValues():null;if(e)for(const t of e)this.__storageAPI__.remove(t)},null!==this.__storageAPI__.get&&null!==this.__storageAPI__.set&&null!==this.__storageAPI__.remove}__isLocalStorageAvailable(){if("undefined"!=typeof localStorage)try{let e=`test_${location.hostname.replace(".","-")}_${Date.now()}`;return localStorage.setItem(e,"_OK_"),"_OK_"===localStorage.getItem(e)&&(localStorage.removeItem(e),this.__storageAPI__.get=localStorage.getItem,this.__storageAPI__.set=localStorage.setItem,this.__storageAPI__.remove=localStorage.removeItem,this.__storageAPI__.clear=localStorage.clear,!0)}catch(e){throw new o("Storage API is unsupported, or blocked by browser privacy settings.")}throw new o("Storage API is unsupported.")}get version(){return this.__version__}has(e){if(this.__cache__.has(e))return!0;try{return void 0!==this.get(e)}catch(e){return!1}}get(e){try{const t={name:e,value:this.__cache__.has(e)?this.__cache__.get(e):JSON.parse(this.__storageAPI__.get(e))};return this.__emit("read",t),void 0!==t.value&&this.__cache__.set(e,t.value),t.value}catch(e){throw new o("Error reading data from Storage: {$e.message}")}}set(e,t){try{const _={name:e,value:t};return this.__emit("write",_),void 0!==_.value?(this.__cache__.set(e,_.value),this.__storageAPI__.set(e,JSON.stringify(_.value))):this.__storageAPI__.remove(e),this}catch(e){throw new o("Error writing data to Storage: {$e.message}")}}remove(e){const t={name:e,process:!0};return this.__emit("remove",t),t.process&&(this.__cache__.delete(e),this.__storageAPI__.remove(e)),this}clear(){const e={process:!0};return this.__emit("clear",e),e.process&&(this.__cache__.clear(),this.__storageAPI__.clear(),this.__storageAPI__.set("_v",this.__version__)),this}addEventListener(e,t){return this.__e__[e]||(this.__e__[e]=[]),this.__e__[e].push(t),this}on(e,t){this.addEventListener(e,t)}};var n=_(918);class a extends s.Z{constructor(e={},t={},_=null){const s={logHeaderColor:"c5c",logTextColor:"ddd",noConsole:!1,useUserscriptStorage:!0},r=t?Object.assign(s,t):s;super(e,r),this.__is_userscript__=e&&"run-at"in e&&("matches"in e||"includes"in e),this.__is_mobile_device__=this.__isMobile(),this.__config__.use_userscript_storage=r.useUserscriptStorage,_&&(this.__onStorageUpgrade__=_)}__isMobile(){if("maxTouchPoints"in navigator)return navigator.maxTouchPoints>0;if("msMaxTouchPoints"in navigator)return navigator.msMaxTouchPoints>0;{let e=window.matchMedia&&matchMedia("(pointer:coarse)");if(e&&"(pointer:coarse)"===e.media)return!!e.matches;if("orientation"in window)return!0;if("userAgent"in navigator&&navigator.userAgent)return/\b(Android|Windows Phone|iPhone|iPad|iPod|webOS|BlackBerry|Opera Mini|IEMobile)\b/i.test(navigator.userAgent)}}__initStorage(){try{const e={isUserscript:this.__is_userscript__,useUserscriptStorage:this.__config__.use_userscript_storage};return this.__storage__=new i(this.__version__,e,this.__onStorageUpgrade__),this.__storage_}catch(e){const t=`Unable to initialize app storage: ${e.message}`;throw this.logError(t),new o(t)}}get isUserscript(){return this.__is_userscript__}get isMobile(){return this.__is_mobile_device__}get storage(){return"__storage__"in this?this.__storage__:this.__initStorage()}waitDOMLoading(e,t){document.querySelector(e)?t():setTimeout(this.waitPageLoading(e,t),330)}createNode(e="DIV",t=null,_=null,s=null){if(null===e||"TEXT"===e.toUpperCase())return document.createTextNode(t||"");{const r=s?document.createElementNS(s,e):document.createElement(e);if(s&&"SVG"==e.toUpperCase()&&r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),_)for(const[e,t]of Object.entries(_))if("data"==e)for(const[e,_]of Object.entries(t))r.dataset[e]=_;else r.setAttribute(e,t);return t&&(Array.isArray(t)?t.forEach((e=>{r.appendChild("string"==typeof e?document.createTextNode(e):e)})):r.appendChild("string"==typeof t?document.createTextNode(t):t)),r}}injectCSS(e,t=null,_=null,s=!1){if(document.querySelector(t))return;e=(s?e:e.replace(/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,"")).replace(/[\t\n]/g," ").replace(/[\s]{2,}/g," ");let r=this.createNode("STYLE",e,{type:"text/css"});return t&&(r.id=t),_&&(r.media=_),document.head.appendChild(r),r}}n.Z.toBrowser({XelWebApp:a});const c=a}},t={};function _(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,_),o.exports}_.d=(e,t)=>{for(var s in t)_.o(t,s)&&!_.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},_.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=_(416),t=_(778),s=_(918);const r={XelApp:e.Z,XelWebApp:t.Z};s.Z.toBrowser({XelJSlib:r})})()})();
//# sourceMappingURL=xeljslib.min.js.map